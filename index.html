<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bienvenue — Hugo FRANÇOIS</title>
  <link rel="stylesheet" href="style.css">
</head>

<body class="splash">

  <!-- FOND PARTICULES -->
  <div id="particles-bg">
    <div class="particules"></div>
  </div>

  <!-- BOUTON CENTRÉ -->
  <div id="center-container">
    <button class="button" id="enter-btn">START</button>
  </div>

  <script>
    // Code de particules.js intégré directement
    var particulesSystemInstances = [];

    window.onload = function () {
        var particulesCounter = 0;
        var allItem = document.getElementsByClassName('particules');

        for (var i = 0; i < allItem.length; ++i) {
            particulesSystemInstances[particulesCounter] = new ParticulesSystem(allItem[i]);
            particulesSystemInstances[particulesCounter].init();
            particulesCounter++;
        }
        
        // Interaction bouton START
        setupButton();
    };

    var ParticulesSystem = function (dom) {
        var self         = this,
            data         = dom.dataset,
            initialLines = 'rgba(102,252,241,0.25)',
            initialDots  = 'rgba(255,255,255,0.9)',
            mouse        = {x: 10, y: 10},
            canvas       = document.createElement("canvas"),
            canvasDom,
            ctx          = canvas.getContext("2d"),
            retina       = window.devicePixelRatio > 1,
            particles    = [],
            patriclesNum = 1000,
            rad          = 5;

        if (retina) {
            patriclesNum *= 2;
            rad++;
        }

        self.colorDots  = initialDots;
        self.colorLines = initialLines;

        self.init = function () {
            dom.appendChild(canvas);
            canvasDom = dom.querySelector('canvas');

            self.setCanvasSize(canvasDom);
            window.addEventListener("resize", self.setCanvasSize);

            for (var i = 0; i < patriclesNum; i++) {
                particles.push(new multi_part());
            }

            canvasDom.addEventListener('mousemove', self.mouseMoveCanvas, false);

            window.setInterval(function () {
                self.move_part()
            }, 33);
        };

        function multi_part() {
            this.x   = Math.random() * canvasDom.width;
            this.y   = Math.random() * canvasDom.height;
            this.vx  = Math.random() * 0.88 - 0.44;
            this.vy  = Math.random() * 0.88 - 0.44;
            this.rad = Math.random() * 2 + 1;
        }

        self.setCanvasSize = function () {
            if (retina) {
                canvasDom.width  = canvasDom.parentNode.offsetWidth * 2;
                canvasDom.height = canvasDom.parentNode.offsetHeight * 2;
            } else {
                canvasDom.width  = canvasDom.parentNode.offsetWidth;
                canvasDom.height = canvasDom.parentNode.offsetHeight;
            }
            canvasDom.style.width  = canvasDom.parentNode.offsetWidth + "px";
            canvasDom.style.height = canvasDom.parentNode.offsetHeight + "px";
        };

        self.move_part = function () {
            ctx.clearRect(0, 0, canvasDom.width, canvasDom.height);

            for (var i = 0; i < patriclesNum; i++) {
                var temp = particles[i];
                var distParticule = self.findDistance(temp, mouse);

                var distretina = retina ? 150 : 100;
                if (distParticule < distretina) {
                    self.createLine(temp, mouse, distParticule);
                }

                for (var j = 0; j < patriclesNum; j++) {
                    var temp2 = particles[j];
                    if (temp !== temp2) {
                        var d = self.findDistance(temp, temp2);
                        if (d < distretina) {
                            self.createLine(temp, temp2, d);
                        }
                    }
                }

                ctx.fillStyle = self.colorDots;
                ctx.globalAlpha = 1;
                ctx.beginPath();
                ctx.arc(temp.x, temp.y, temp.rad, 0, Math.PI * 2, true);
                ctx.fill();
                ctx.closePath();

                temp.x += temp.vx;
                temp.y += temp.vy;

                if (temp.x > canvasDom.width) temp.x = 0;
                if (temp.x < 0) temp.x = canvasDom.width;
                if (temp.y > canvasDom.height) temp.y = 0;
                if (temp.y < 0) temp.y = canvasDom.height;
            }
        };

        self.createLine = function (p1, p2, d) {
            ctx.strokeStyle = self.colorLines;
            ctx.lineWidth = 0.8;
            ctx.globalAlpha = 12 / d - 0.08;
            ctx.beginPath();
            ctx.moveTo(p1.x, p1.y);
            ctx.lineTo(p2.x, p2.y);
            ctx.stroke();
        };

        self.findDistance = function (p1, p2) {
            return Math.sqrt(
                Math.pow(p2.x - p1.x, 2) +
                Math.pow(p2.y - p1.y, 2)
            );
        };

        self.mouseMoveCanvas = function (event) {
            var rect = canvasDom.getBoundingClientRect();
            mouse = {
                x: event.clientX - rect.left,
                y: event.clientY - rect.top
            };
        };
    };

    function setupButton() {
        function setParticlesDotsColor(dotsColor) {
            for (let i = 0; i < particulesSystemInstances.length; i++) {
                if (particulesSystemInstances[i]) {
                    particulesSystemInstances[i].colorDots = dotsColor;
                }
            }
        }

        const startBtn = document.getElementById("enter-btn");

        startBtn.addEventListener("mouseenter", () => {
            setParticlesDotsColor("rgba(255,0,0,0.9)");
        });

        startBtn.addEventListener("mouseleave", () => {
            setParticlesDotsColor("rgba(255,255,255,0.9)");
        });

        startBtn.addEventListener("click", () => {
            window.location.href = "home.html";
        });
    }
  </script>

</body>
</html>