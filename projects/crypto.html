<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Collection de codes cryptographiques | Hugo Fran√ßois</title>
  <meta name="description" content="Collection d‚Äôexp√©riences cryptographiques : AES, RSA, Vigen√®re, OTP, Transposition, etc.">
  <link rel="stylesheet" href="../style.css" />
  <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>

</head>

<body>
<canvas id="canvas"></canvas><canvas id="canvas2"></canvas>

<header class="site-header">
  <div class="container header-inner">
    <h1>Collection de codes cryptographiques</h1>
    <p class="subtitle">Exploration personnelle de la cryptographie en Python</p>
  </div>
</header>

<main class="container section">
  <h2>Introduction</h2>
  <p>J‚Äôai commenc√© √† m‚Äôint√©resser √† la cryptographie pour en comprendre la logique math√©matique et la beaut√© conceptuelle.
  Mon objectif n‚Äô√©tait pas de r√©inventer AES ou RSA, mais de <strong>comprendre</strong> leur m√©canique interne en les r√©√©crivant moi-m√™me.
  Cette page regroupe mes codes, du plus simple au plus structur√©, accompagn√©s de d√©monstrations locales.</p>

  <!-- ==================== 1. MONOALPHAB√âTIQUE ==================== -->
  <section class="test-block">
    <h2>1. Chiffrement monoalphab√©tique</h2>
    <p>Premier pas dans la cryptographie : chaque lettre est remplac√©e par une autre selon un alphabet fixe.
    Simple mais formateur, ce chiffrement m‚Äôa fait d√©couvrir la faiblesse des syst√®mes purement d√©terministes.</p>
    <textarea id="monoInput" rows="3" placeholder="Texte √† chiffrer..."></textarea>
    <button class="btn" onclick="runPython('mono')">‚ñ∂Ô∏è Lancer le test</button>
    <button class="btn ghost" onclick="clearOutput('monoOutput')">üßπ Effacer</button>
    <pre id="monoOutput" class="output">Console pr√™te.</pre>
  </section>

  <!-- ==================== 2. VIGENERE ==================== -->
  <section class="test-block">
    <h2>2. Chiffrement de Vigen√®re</h2>
    <p>Variante plus √©volu√©e : elle introduit la notion de cl√© r√©p√©t√©e. Chaque lettre est d√©cal√©e selon une cl√©.
    J‚Äôai ajout√© la possibilit√© de chiffrer, d√©chiffrer ou m√™me craquer le message par analyse fr√©quentielle.</p>

    <input id="vigenereKey" placeholder="Cl√© (ex : SECURITE)" />
    <textarea id="vigenereInput" rows="3" placeholder="Texte..."></textarea>
    <div>
      <button class="btn" onclick="runPython('vigenere','encrypt')">üîí Chiffrer</button>
      <button class="btn" onclick="runPython('vigenere','decrypt')">üîì D√©chiffrer</button>
      <button class="btn" onclick="runPython('vigenere','crack')">üß† Craquer</button>
      <button class="btn ghost" onclick="clearOutput('vigenereOutput')">üßπ Effacer</button>
    </div>
    <pre id="vigenereOutput" class="output">Console pr√™te.</pre>
  </section>

  <!-- ==================== 3. TRANSPOSITION ==================== -->
  <section class="test-block">
    <h2>3. Chiffrement par transposition</h2>
    <p>Plut√¥t que de changer les lettres, on modifie leur ordre.
    Ce syst√®me repose sur un simple r√©arrangement, mais montre d√©j√† la puissance des permutations dans la s√©curit√©.</p>

    <input id="transKey" type="number" placeholder="Cl√© (ex : 3)" />
    <textarea id="transInput" rows="3" placeholder="Texte..."></textarea>
    <button class="btn" onclick="runPython('transposition')">‚ñ∂Ô∏è Lancer le test</button>
    <button class="btn ghost" onclick="clearOutput('transOutput')">üßπ Effacer</button>
    <pre id="transOutput" class="output">Console pr√™te.</pre>
  </section>

  <!-- ==================== 4. OTP ==================== -->
  <section class="test-block">
    <h2>4. One-Time Pad (OTP)</h2>
    <p>C‚Äôest l‚Äôalgorithme parfait : chaque caract√®re est combin√© √† une cl√© al√©atoire unique.
    Incassable en th√©orie, inutilisable en pratique sans gestion parfaite de la cl√©.
    Le script montre √† la fois le texte clair, la cl√©, le texte chiffr√© en binaire, et la v√©rification finale.</p>

    <textarea id="otpInput" rows="3" placeholder="Texte..."></textarea>
    <button class="btn" onclick="runPython('otp')">‚ñ∂Ô∏è Ex√©cuter OTP</button>
    <button class="btn ghost" onclick="clearOutput('otpOutput')">üßπ Effacer</button>
    <pre id="otpOutput" class="output">Console pr√™te.</pre>
  </section>

  <!-- ==================== 5. AES ==================== -->
  <section class="test-block">
    <h2>5. AES (ECB / CBC)</h2>
    <p>Apr√®s les syst√®mes classiques, je me suis int√©ress√© √† AES, le standard moderne.
    Cette simulation illustre la diffusion et la confusion sur plusieurs blocs, puis d√©montre ce qu‚Äôune attaque provoque
    lorsqu‚Äôon modifie l‚Äôordre des blocs chiffr√©s.</p>

    <textarea id="aesInput" rows="3" placeholder="Texte..."></textarea>
    <div>
      <button class="btn" onclick="runPython('aes','encrypt')">üîí Chiffrer</button>
      <button class="btn" onclick="runPython('aes','attack')">‚öîÔ∏è Attaque (modifier blocs)</button>
      <button class="btn ghost" onclick="clearOutput('aesOutput')">üßπ Effacer</button>
    </div>
    <pre id="aesOutput" class="output">Console pr√™te.</pre>
  </section>

  <!-- ==================== 6. RSA ==================== -->
  <section class="test-block">
    <h2>6. RSA</h2>
    <p>Dernier jalon : le chiffrement asym√©trique. J‚Äôai compris la puissance de l‚Äôarithm√©tique modulaire
    et la lenteur calculatoire qu‚Äôelle implique. Cette d√©mo affiche la g√©n√©ration des cl√©s PEM et le chiffrement du message.</p>

    <textarea id="rsaInput" rows="3" placeholder="Texte..."></textarea>
    <button class="btn" onclick="runPython('rsa')">‚ñ∂Ô∏è Simuler RSA</button>
    <button class="btn ghost" onclick="clearOutput('rsaOutput')">üßπ Effacer</button>
    <pre id="rsaOutput" class="output">Console pr√™te.</pre>
  </section>

  <section>
    <h2>Conclusion</h2>
    <p>Cette collection illustre mon √©volution : de la substitution √† la permutation, puis √† la cl√©, au hasard et √† la modularit√©.
    J‚Äôai appris qu‚Äôen cryptographie, la vraie s√©curit√© ne r√©side pas dans le code, mais dans la compr√©hension de ses limites.</p>
    <a href="../index.html#projects" class="btn ghost">‚Üê Retour au portfolio</a>
  </section>
</main>

<footer class="site-footer">
  <div class="container"><p>¬© 2025 Hugo Fran√ßois ‚Äî Collection cryptographique</p></div>
</footer>

<!-- ==================== SCRIPT PYTHON (PYODIDE) ==================== -->
<script>
  /* --------- Pyodide runner propre (ne modifie pas le DOM visuel) --------- */
  let pyodide = null;
  const SCRIPT_PATHS = {
    mono: "../assets/scripts/crypto/mono_alphabetic_cipher.py",
    vigenere: "../assets/scripts/crypto/vigenere.py",
    transposition: "../assets/scripts/crypto/transposition.py",
    otp: "../assets/scripts/crypto/otp.py",
    aes: "../assets/scripts/crypto/aes-ecb.py",
    rsa: "../assets/scripts/crypto/rsa.py"
  };
  const scriptCache = {};
  
  // utilitaire s√ªr pour ins√©rer des cha√Ænes dans le code python (√©chappe backslash et triple-quote)
  function escForPy(s){
    if(s === null || s === undefined) return "";
    return String(s).replace(/\\/g,'\\\\').replace(/"""/g,'\\"""');
  }
  
  // charge un .py (avec cache)
  async function loadScript(kind){
    if(!SCRIPT_PATHS[kind]) throw new Error("Unknown script kind: "+kind);
    if(scriptCache[kind]) return scriptCache[kind];
    const res = await fetch(SCRIPT_PATHS[kind]);
    if(!res.ok) throw new Error("Failed to fetch "+SCRIPT_PATHS[kind]+" (status "+res.status+")");
    const text = await res.text();
    scriptCache[kind] = text;
    return text;
  }
  
  // initialise pyodide (non intrusif)
  async function initPyodideIfNeeded(){
    if(pyodide) return pyodide;
    try{
      document.querySelectorAll(".output").forEach(el => el.textContent = "‚è≥ Chargement de l'interpr√©teur Python...");
      pyodide = await loadPyodide();
      document.querySelectorAll(".output").forEach(el => el.textContent = "‚úÖ Environnement Python pr√™t.");
      return pyodide;
    }catch(e){
      console.error("Pyodide init error:", e);
      document.querySelectorAll(".output").forEach(el => el.textContent = "‚ùå Impossible de charger Pyodide : "+e);
      throw e;
    }
  }
  
  // Ex√©cute le script .py en injectant __TEXT__, __KEY__, __N__, __MODE__
  // R√®gle importante : on n'alt√®re pas le DOM, on r√©cup√®re uniquement la sortie retourn√©e par Pyodide
  async function execScript(kind, payload = {}, mode = ""){
    await initPyodideIfNeeded();
    const script = await loadScript(kind);
    // bootstrap variables disponibles pour le script
    const bootstrap = `
  __TEXT__ = """${escForPy(payload.text ?? "")}"""
  __KEY__  = """${escForPy(payload.key ?? "")}"""
  __N__    = ${Number(payload.n ?? 0)}
  __MODE__ = """${escForPy(mode)}"""
  `;
    // driver non invasif : essaye d'appeler demo/run/main si pr√©sent sinon se contente des print() du fichier
    const driver = `
  # driver wrapper ‚Äî laisse les prints natifs du script s'afficher
  try:
      text = __TEXT__
      key  = __KEY__
      n    = __N__
      mode = __MODE__
      if 'demo' in globals():
          _res = demo(text=text, key=key, n=n, mode=mode)
          if _res is not None:
              print(_res)
      elif 'main' in globals():
          _res = main(text, mode, key, n)
          if _res is not None:
              print(_res)
      elif 'run' in globals():
          _res = run(text, mode, key, n)
          if _res is not None:
              print(_res)
      # sinon : rely on prints defined dans le script import√©
  except Exception as e:
      import traceback
      print("‚ùå Exception dans le script :", e)
      print(traceback.format_exc())
  `;
    const full = bootstrap + "\n" + script + "\n" + driver;
    // ex√©cution asynchrone
    return await pyodide.runPythonAsync(full);
  }
  
  /* --- Fonction expos√©e utilis√©e par ton HTML : runPython(type,mode) --- 
     Elle garde EXACTEMENT la m√™me signature que tu utilisais.
     Elle √©crit le r√©sultat dans l'√©l√©ment id `${type}Output`. */
  async function runPython(type, mode){
    try{
      await initPyodideIfNeeded();
    }catch(e){
      // d√©j√† g√©r√© dans init
      return;
    }
  
    // r√©cup√®re les entr√©es depuis le DOM sans r√©organiser la page
    let payload = {};
    try{
      if(type === "mono"){
        payload.text = document.getElementById('monoInput')?.value ?? "";
      } else if(type === "vigenere"){
        payload.text = document.getElementById('vigenereInput')?.value ?? "";
        payload.key  = document.getElementById('vigenereKey')?.value ?? "";
      } else if(type === "transposition"){
        payload.text = document.getElementById('transInput')?.value ?? "";
        payload.n    = document.getElementById('transKey')?.value ?? 0;
      } else if(type === "otp"){
        payload.text = document.getElementById('otpInput')?.value ?? "";
      } else if(type === "aes"){
        payload.text = document.getElementById('aesInput')?.value ?? "";
      } else if(type === "rsa"){
        payload.text = document.getElementById('rsaInput')?.value ?? "";
      } else {
        // si type inconnu, on essaye de charger par nom exact
        payload.text = (document.querySelector('textarea')?.value ?? "");
      }
    }catch(e){
      console.warn("Erreur lecture inputs:", e);
    }
  
    const outputEl = document.getElementById(type+"Output");
    if(outputEl) outputEl.textContent = "‚ñ∂Ô∏è Ex√©cution en cours...";
  
    try{
      const result = await execScript(type, payload, mode ?? "");
      // Pyodide affiche les prints directement ‚Äî on r√©cup√®re un return √©ventuel si le script retourne quelque chose
      // montre le r√©sultat (ou un message de fin si rien contenu)
      const text = (result === undefined || result === null) ? "‚úîÔ∏è Ex√©cution termin√©e. Consulte la sortie imprim√©e ci-dessous." : String(result);
      if(outputEl) outputEl.textContent = text;
    }catch(e){
      console.error("runPython error:", e);
      if(outputEl) outputEl.textContent = "‚ùå Erreur d'ex√©cution : " + e;
    }
  }
  
  // expose global (compatibilit√© avec tes boutons actuels qui appellent runPython(...))
  window.runPython = runPython;
  
  // petit helper pour effacer (ton HTML appelle clearOutput(id))
  window.clearOutput = function(id){
    try{ document.getElementById(id).textContent = "Console nettoy√©e."; }catch(e){}
  };
  </script>
  
<script src="../background.js"></script>
</body>
</html>
