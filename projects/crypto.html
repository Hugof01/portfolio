<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Collection de codes cryptographiques | Hugo Fran√ßois</title>
  <meta name="description" content="Collection d‚Äôexp√©riences cryptographiques : AES, RSA, Vigen√®re, OTP, Transposition, etc.">
  <link rel="stylesheet" href="../style.css" />
  <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>

</head>

<body>
<canvas id="canvas"></canvas><canvas id="canvas2"></canvas>

<header class="site-header">
  <div class="container header-inner">
    <h1>Collection de codes cryptographiques</h1>
    <p class="subtitle">Exploration personnelle de la cryptographie en Python</p>
  </div>
</header>

<main class="container section">
  <h2>Introduction</h2>
  <p>J‚Äôai commenc√© √† m‚Äôint√©resser √† la cryptographie pour en comprendre la logique math√©matique et la beaut√© conceptuelle.
  Mon objectif n‚Äô√©tait pas de r√©inventer AES ou RSA, mais de <strong>comprendre</strong> leur m√©canique interne en les r√©√©crivant moi-m√™me.
  Cette page regroupe mes codes, du plus simple au plus structur√©, accompagn√©s de d√©monstrations locales.</p>

  <!-- ==================== 1. MONOALPHAB√âTIQUE ==================== -->
  <section class="test-block">
    <h2>1. Chiffrement monoalphab√©tique</h2>
    <p>Premier pas dans la cryptographie : chaque lettre est remplac√©e par une autre selon un alphabet fixe.
    Simple mais formateur, ce chiffrement m‚Äôa fait d√©couvrir la faiblesse des syst√®mes purement d√©terministes.</p>
    <textarea id="monoInput" rows="3" placeholder="Texte √† chiffrer..."></textarea>
    <button class="btn" onclick="runPython('mono')">‚ñ∂Ô∏è Lancer le test</button>
    <button class="btn ghost" onclick="clearOutput('monoOutput')">üßπ Effacer</button>
    <pre id="monoOutput" class="output">Console pr√™te.</pre>
  </section>

  <!-- ==================== 2. VIGENERE ==================== -->
  <section class="test-block">
    <h2>2. Chiffrement de Vigen√®re</h2>
    <p>Variante plus √©volu√©e : elle introduit la notion de cl√© r√©p√©t√©e. Chaque lettre est d√©cal√©e selon une cl√©.
    J‚Äôai ajout√© la possibilit√© de chiffrer, d√©chiffrer ou m√™me craquer le message par analyse fr√©quentielle.</p>

    <input id="vigenereKey" placeholder="Cl√© (ex : SECURITE)" />
    <textarea id="vigenereInput" rows="3" placeholder="Texte..."></textarea>
    <div>
      <button class="btn" onclick="runPython('vigenere','encrypt')">üîí Chiffrer</button>
      <button class="btn" onclick="runPython('vigenere','decrypt')">üîì D√©chiffrer</button>
      <button class="btn" onclick="runPython('vigenere','crack')">üß† Craquer</button>
      <button class="btn ghost" onclick="clearOutput('vigenereOutput')">üßπ Effacer</button>
    </div>
    <pre id="vigenereOutput" class="output">Console pr√™te.</pre>
  </section>

  <!-- ==================== 3. TRANSPOSITION ==================== -->
  <section class="test-block">
    <h2>3. Chiffrement par transposition</h2>
    <p>Plut√¥t que de changer les lettres, on modifie leur ordre.
    Ce syst√®me repose sur un simple r√©arrangement, mais montre d√©j√† la puissance des permutations dans la s√©curit√©.</p>

    <input id="transKey" type="number" placeholder="Cl√© (ex : 3)" />
    <textarea id="transInput" rows="3" placeholder="Texte..."></textarea>
    <button class="btn" onclick="runPython('transposition')">‚ñ∂Ô∏è Lancer le test</button>
    <button class="btn ghost" onclick="clearOutput('transOutput')">üßπ Effacer</button>
    <pre id="transOutput" class="output">Console pr√™te.</pre>
  </section>

  <!-- ==================== 4. OTP ==================== -->
  <section class="test-block">
    <h2>4. One-Time Pad (OTP)</h2>
    <p>C‚Äôest l‚Äôalgorithme parfait : chaque caract√®re est combin√© √† une cl√© al√©atoire unique.
    Incassable en th√©orie, inutilisable en pratique sans gestion parfaite de la cl√©.
    Le script montre √† la fois le texte clair, la cl√©, le texte chiffr√© en binaire, et la v√©rification finale.</p>

    <textarea id="otpInput" rows="3" placeholder="Texte..."></textarea>
    <button class="btn" onclick="runPython('otp')">‚ñ∂Ô∏è Ex√©cuter OTP</button>
    <button class="btn ghost" onclick="clearOutput('otpOutput')">üßπ Effacer</button>
    <pre id="otpOutput" class="output">Console pr√™te.</pre>
  </section>

  <!-- ==================== 5. AES ==================== -->
  <section class="test-block">
    <h2>5. AES (ECB / CBC)</h2>
    <p>Apr√®s les syst√®mes classiques, je me suis int√©ress√© √† AES, le standard moderne.
    Cette simulation illustre la diffusion et la confusion sur plusieurs blocs, puis d√©montre ce qu‚Äôune attaque provoque
    lorsqu‚Äôon modifie l‚Äôordre des blocs chiffr√©s.</p>

    <textarea id="aesInput" rows="3" placeholder="Texte..."></textarea>
    <div>
      <button class="btn" onclick="runPython('aes','encrypt')">üîí Chiffrer</button>
      <button class="btn" onclick="runPython('aes','attack')">‚öîÔ∏è Attaque (modifier blocs)</button>
      <button class="btn ghost" onclick="clearOutput('aesOutput')">üßπ Effacer</button>
    </div>
    <pre id="aesOutput" class="output">Console pr√™te.</pre>
  </section>

  <!-- ==================== 6. RSA ==================== -->
  <section class="test-block">
    <h2>6. RSA</h2>
    <p>Dernier jalon : le chiffrement asym√©trique. J‚Äôai compris la puissance de l‚Äôarithm√©tique modulaire
    et la lenteur calculatoire qu‚Äôelle implique. Cette d√©mo affiche la g√©n√©ration des cl√©s PEM et le chiffrement du message.</p>

    <textarea id="rsaInput" rows="3" placeholder="Texte..."></textarea>
    <button class="btn" onclick="runPython('rsa')">‚ñ∂Ô∏è Simuler RSA</button>
    <button class="btn ghost" onclick="clearOutput('rsaOutput')">üßπ Effacer</button>
    <pre id="rsaOutput" class="output">Console pr√™te.</pre>
  </section>

  <section>
    <h2>Conclusion</h2>
    <p>Cette collection illustre mon √©volution : de la substitution √† la permutation, puis √† la cl√©, au hasard et √† la modularit√©.
    J‚Äôai appris qu‚Äôen cryptographie, la vraie s√©curit√© ne r√©side pas dans le code, mais dans la compr√©hension de ses limites.</p>
    <a href="../index.html#projects" class="btn ghost">‚Üê Retour au portfolio</a>
  </section>
</main>

<footer class="site-footer">
  <div class="container"><p>¬© 2025 Hugo Fran√ßois ‚Äî Collection cryptographique</p></div>
</footer>

<!-- ==================== SCRIPT PYTHON (PYODIDE) ==================== -->
<script>
  let pyodide;

// --------- 1) D√©marrage Pyodide ----------
  (async function initPyodide() {
    document.querySelectorAll(".output").forEach(el => el.textContent = "‚è≥ Chargement de l'interpr√©teur Python...");
    pyodide = await loadPyodide();
    document.querySelectorAll(".output").forEach(el => el.textContent = "‚úÖ Environnement Python pr√™t.");
  })();

// --------- 2) O√π sont tes scripts ----------
  const SCRIPT_PATHS = {
    mono:       "../assets/scripts/crypto/mono_alphabetic_cipher.py",
    vigenere:   "../assets/scripts/crypto/vigenere.py",                 // assure-toi que ce fichier est l√†
    transpo:    "../assets/scripts/crypto/transposition.py",
    otp:        "../assets/scripts/crypto/otp.py",
    aes:        "../assets/scripts/crypto/aes-ecb.py",                  // sorties ‚Äúblocs/attaque‚Äù comme ton terminal
    rsa:        "../assets/scripts/crypto/rsa.py"
  };

  const cache = {}; // on m√©morise les fichiers charg√©s

  async function loadScriptText(kind){
    if (!cache[kind]) {
      const res = await fetch(SCRIPT_PATHS[kind]);
      if (!res.ok) throw new Error(`Impossible de charger ${SCRIPT_PATHS[kind]}`);
      cache[kind] = await res.text();
    }
    return cache[kind];
  }

// --------- 3) Utilitaires ----------
  function pyStr(s){           // prot√®ge les triples quotes
    return (s ?? "").replaceAll('\\', '\\\\').replaceAll('"""','\\"""');
  }
  function setOutput(id, txt){
    document.getElementById(id).textContent = txt;
  }
  window.clearOutput = function(id){
    setOutput(id, "Console nettoy√©e.");
  };

// --------- 4) Routeur d‚Äôex√©cution ----------
  async function run(kind, payload, mode=""){
    if(!pyodide) return;

    // 4.1 Charge le fichier demand√©
    const script = await loadScriptText(kind);

    // 4.2 Pr√©pare les variables d‚Äôentr√©e accessibles par le script
    //     (tu peux t‚Äôen servir directement dans tes .py si tu veux)
    const bootstrap = `
__TEXT__ = """${pyStr(payload.text)}"""
__KEY__  = """${pyStr(payload.key || "")}"""
__N__    = ${Number(payload.n ?? 0)}
__MODE__ = """${mode}"""
`;

    // 4.3 ‚ÄúDriver‚Äù g√©n√©rique :
    // - Ex√©cute ton fichier tel quel (prints affich√©s)
    // - Si le script expose une fonction standard, on la d√©clenche.
    //   (sinon, tes prints natifs suffisent d√©j√†)
    const driver = `
# ---- Driver g√©n√©rique pour d√©clencher une d√©mo lisible ----
_result = None
try:
    # Entr√©es possibles (non obligatoires selon le script)
    text = __TEXT__
    key  = __KEY__
    n    = __N__
    mode = __MODE__

    # Points d'entr√©e classiques si pr√©sents :
    if 'demo' in globals():
        _result = demo(text=text, key=key, n=n, mode=mode)
    elif 'main' in globals():
        _result = main(text, mode, key, n)
    elif 'run' in globals():
        _result = run(text, mode, key, n)
    # Sinon : on laisse simplement les print() du script s‚Äôafficher

except Exception as _e:
    import traceback
    print("‚ùå Exception:", _e)
    print(traceback.format_exc())

if _result is not None:
    print(_result)
`;

    // 4.4 Ex√©cute dans Pyodide (bootstrap + ton script + driver)
    const code = bootstrap + "\n" + script + "\n" + driver;
    return await pyodide.runPythonAsync(code);
  }

// --------- 5) Boutons de ta page ----------
  // Monoalphab√©tique
  window.runMono = async function(){
    const text = document.getElementById('monoInput').value;
    try{
      await run("mono", {text});
    }catch(e){ setOutput("monoOutput", "‚ùå Erreur : " + e); return; }
    setOutput("monoOutput", pyodide.globals.get('___last_output') || "‚úîÔ∏è Fini (voir prints ci-dessus)");
  };

  // Vigen√®re (chiffrer/d√©chiffrer/craquer via ‚Äúmode‚Äù)
  window.runVigenere = async function(mode){
    const text = document.getElementById('vigenereInput').value;
    const key  = document.getElementById('vigenereKey').value;
    try{
      await run("vigenere", {text, key}, mode);
    }catch(e){ setOutput("vigenereOutput", "‚ùå Erreur : " + e); return; }
    setOutput("vigenereOutput", "‚úîÔ∏è Ex√©cution termin√©e. Consulte la sortie imprim√©e au-dessus.");
  };

  // Transposition
  window.runTranspo = async function(){
    const text = document.getElementById('transInput').value;
    const n    = document.getElementById('transKey').value;
    try{
      await run("transpo", {text, n});
    }catch(e){ setOutput("transOutput", "‚ùå Erreur : " + e); return; }
    setOutput("transOutput", "‚úîÔ∏è Ex√©cution termin√©e. Consulte la sortie imprim√©e au-dessus.");
  };

  // OTP ‚Äì affiche binaire + cl√© + chiffr√© comme en terminal
  window.runOTP = async function(){
    const text = document.getElementById('otpInput').value;
    try{
      await run("otp", {text});
    }catch(e){ setOutput("otpOutput", "‚ùå Erreur : " + e); return; }
    setOutput("otpOutput", "‚úîÔ∏è Ex√©cution termin√©e. Consulte la sortie imprim√©e au-dessus.");
  };

  // AES ‚Äì ‚Äúnormal‚Äù ou ‚Äúattack‚Äù (r√©ordonnancement de blocs)
  window.runAES = async function(mode="normal"){
    const text = document.getElementById('aesInput').value;
    try{
      await run("aes", {text}, mode);
    }catch(e){ setOutput("aesOutput", "‚ùå Erreur : " + e); return; }
    setOutput("aesOutput", "‚úîÔ∏è Simulation affich√©e comme dans le terminal (blocs & attaque ECB).");
  };

  // RSA ‚Äì affichage PEM + signature comme dans ta capture
  window.runRSA = async function(){
    const text = document.getElementById('rsaInput').value;
    try{
      await run("rsa", {text});
    }catch(e){ setOutput("rsaOutput", "‚ùå Erreur : " + e); return; }
    setOutput("rsaOutput", "‚úîÔ∏è Cl√©s PEM, signature et v√©rification affich√©es par le script.");
  };
</script>

<script src="../background.js"></script>
</body>
</html>
